import y from"./Admin-DwthQgva.js";import k from"./Client-DHgyBioL.js";import{y as v,c as w,b as t,w as C,e as i,d as j,g as o,u,m as N,h as c,F as p,k as g,n as f,t as x,W as a,J as $}from"./app-DqWAvktM.js";import"./Header-X6uiH6jU.js";import"./index-DXZpKVQg.js";import"./Sidebar-Db8HPz_V.js";import"./Header-C2FZKzFL.js";import"./Sidebar-Co1IhU-H.js";const A={class:"container mx-auto p-6"},L={class:"flex justify-between items-center mb-4"},B={key:0},M={class:"space-y-4"},T={class:"text-xs text-gray-500"},V={class:"flex flex-wrap gap-2"},D=["onClick"],S=["onClick"],W=["onClick"],E={key:0,class:"flex justify-center mt-6 space-x-2"},F=["disabled","onClick","innerHTML"],H={key:1,class:"text-gray-500"},Q={__name:"Index",props:{notifications:Object,auth:Object},setup(m){const n=m,_=s=>{a.put(route("notifications.read",s))},h=()=>{a.put(route("notifications.readAll"))},l=v(()=>{var s;return((s=n.auth.user)==null?void 0:s.role)==="admin"}),b=(s,r=null)=>{r?a.put(route("notifications.read",r),{},{onSuccess:()=>{a.get(route(l.value?"admin.works.show":"client.works.show",s))}}):a.get(route(l.value?"admin.works.show":"client.works.show",s))};return(s,r)=>(t(),w($(l.value?y:k),null,{default:C(()=>[i("div",A,[j(u(N),{title:"Notificaciones"}),i("div",L,[r[0]||(r[0]=i("h1",{class:"text-2xl font-bold"},"🔔 Notificaciones",-1)),n.notifications.data.some(e=>!e.leido)?(t(),o("button",{key:0,onClick:h,class:"text-sm bg-gray-200 px-3 py-1 rounded hover:bg-gray-300 text-gray-800"}," 🧹 Marcar todas como leídas ")):c("",!0)]),n.notifications.data.length?(t(),o("div",B,[i("ul",M,[(t(!0),o(p,null,g(m.notifications.data,e=>(t(),o("li",{key:e.id,class:f(["p-4 border rounded bg-white flex flex-col md:flex-row justify-between items-start md:items-center gap-4",{"opacity-60":e.leido}])},[i("div",null,[i("p",null,x(e.mensaje),1),i("p",T,x(new Date(e.created_at).toLocaleString()),1)]),i("div",V,[e.work_id?(t(),o("button",{key:0,onClick:d=>b(e.work_id,e.id),class:"px-3 py-1 text-sm bg-indigo-500 text-white rounded hover:bg-indigo-600"}," 🔍 Ver Trabajo ",8,D)):c("",!0),e.leido?c("",!0):(t(),o("button",{key:1,onClick:d=>_(e.id),class:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600"}," ✅ Marcar como Leída ",8,S)),i("button",{onClick:d=>u(a).delete(s.route("notifications.destroy",e.id)),class:"px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600"}," 🗑 Eliminar ",8,W)])],2))),128))]),n.notifications.links.length>3?(t(),o("div",E,[(t(!0),o(p,null,g(n.notifications.links,e=>(t(),o("button",{key:e.label,disabled:!e.url,onClick:d=>e.url&&u(a).get(e.url),innerHTML:e.label,class:f(["px-3 py-1 rounded",{"bg-blue-500 text-white":e.active,"bg-gray-200 text-gray-700 hover:bg-gray-300":!e.active}])},null,10,F))),128))])):c("",!0)])):(t(),o("p",H,"No tienes notificaciones."))])]),_:1}))}};export{Q as default};
