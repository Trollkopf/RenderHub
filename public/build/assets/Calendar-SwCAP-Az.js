import{r as d,o as y,a as v,c as x,b as u,w,d as c,e as l,u as g,m as k,f as V,g as i,h as C,i as a,j as r,v as s,F as E,k as U,t as M,l as b}from"./app-DqWAvktM.js";import N from"./Admin-DwthQgva.js";import B from"./CalendarComponent-BVMj6zqo.js";import"./Header-X6uiH6jU.js";import"./index-DXZpKVQg.js";import"./Sidebar-Db8HPz_V.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"container mx-auto p-6 space-y-6"},S={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},T={class:"col-span-1 lg:col-span-2"},q={class:"block"},A={class:"block"},F={class:"block"},R={class:"block mb-4"},_={class:"block mb-4"},j=["value"],z={class:"block"},G={key:0,class:"block mb-4"},Q={__name:"Calendar",setup(L){const p=d(null),t=d({title:"",date:"",recurrence:null,repeat_count:null,color:"#3b82f6",description:"",admins:[]}),m=d([]);y(async()=>{const n=await v.get("/api/admins");m.value=n.data});async function f(){var n;try{await v.post("/calendar",t.value),alert("✅ Evento guardado"),t.value={title:"",start:"",recurrence:null,repeat_count:null,color:"#3b82f6"},(n=p.value)==null||n.loadEvents()}catch(e){console.error("Error al guardar evento:",e)}}return(n,e)=>(u(),x(N,null,{default:w(()=>[c(g(k),{title:"Calendario"}),l("div",D,[e[17]||(e[17]=l("h1",{class:"text-2xl font-bold"},"🗓️ Calendario de Eventos",-1)),l("div",S,[l("div",T,[c(B,{ref_key:"calendarRef",ref:p},null,512)]),l("form",{onSubmit:V(f,["prevent"]),class:"col-span-1 bg-white shadow rounded-xl p-4 space-y-4"},[e[15]||(e[15]=l("h2",{class:"text-2xl font-bold"},"Añadir Evento",-1)),l("label",q,[e[7]||(e[7]=a(" Título: ")),r(l("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.title=o),type:"text",class:"w-full border rounded px-3 py-2 mt-1",required:""},null,512),[[s,t.value.title]])]),l("label",A,[e[8]||(e[8]=a(" Fecha: ")),r(l("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.date=o),type:"date",class:"w-full border rounded px-3 py-2 mt-1",required:""},null,512),[[s,t.value.date]])]),l("label",F,[e[9]||(e[9]=a(" Color del evento: ")),r(l("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=o=>t.value.color=o),class:"w-full h-10 border rounded px-3 py-2 mt-1"},null,512),[[s,t.value.color]])]),l("label",R,[e[10]||(e[10]=a(" Descripción: ")),r(l("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.description=o),maxlength:"500",rows:"3",class:"w-full border rounded px-3 py-2 mt-1 resize-none",placeholder:"Escribe una descripción corta (máx. 500 caracteres)"},null,512),[[s,t.value.description]])]),l("label",_,[e[11]||(e[11]=a(" Administradores asignados: ")),r(l("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.admins=o),multiple:"",class:"w-full border rounded px-3 py-2 mt-1"},[(u(!0),i(E,null,U(m.value,o=>(u(),i("option",{key:o.id,value:o.id},M(o.name),9,j))),128))],512),[[b,t.value.admins]])]),l("label",z,[e[13]||(e[13]=a(" Repetición: ")),r(l("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.recurrence=o),class:"w-full border rounded px-3 py-2 mt-1"},e[12]||(e[12]=[l("option",{value:""},"— No repetir —",-1),l("option",{value:"daily"},"Diariamente",-1),l("option",{value:"weekly"},"Semanalmente",-1),l("option",{value:"monthly"},"Mensualmente",-1),l("option",{value:"quarterly"},"Trimestralmente",-1),l("option",{value:"yearly"},"Anualmente",-1)]),512),[[b,t.value.recurrence]])]),t.value.recurrence?(u(),i("label",G,[e[14]||(e[14]=a(" ¿Cuántas veces se repite (incluyendo la original)? ")),r(l("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.repeat_count=o),type:"number",min:"1",class:"w-full border rounded px-3 py-2 mt-1"},null,512),[[s,t.value.repeat_count]])])):C("",!0),e[16]||(e[16]=l("button",{type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"}," Guardar evento ",-1))],32)])])]),_:1}))}};export{Q as default};
