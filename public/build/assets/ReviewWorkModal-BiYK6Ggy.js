import{r as W,C as j,g as r,b as l,h as a,e,i as p,t as c,F as b,k as m,j as C,v as R,u as g,W as k}from"./app-DeD_P_YC.js";const q={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",style:{overflow:"auto"}},D={class:"bg-white p-6 rounded-lg shadow-md w-11/12"},M={key:0},A={class:"flex flex-wrap gap-4"},F=["href"],V=["src"],B={key:1},T={key:0},$=["href"],z={class:"mt-6 flex justify-end"},E={key:0,class:"mr-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-700"},N={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},S={class:"bg-white p-6 rounded-lg shadow-md w-[600px]"},P={__name:"ReviewWorkModal",props:{showReviewModal:Boolean,selectedWork:Object},emits:["close"],setup(s,{emit:f}){const d=s,h=f,u=W(!1),n=j({descripcion:"",archivo:null}),x=()=>{u.value=!0},v=()=>{u.value=!1,n.reset()},w=()=>{d.selectedWork&&k.post(route("client.works.review",d.selectedWork.id),{action:"accept"},{preserveState:!0})},y=()=>{if(!d.selectedWork)return;const i=new FormData;i.append("action","reject"),i.append("descripcion",n.descripcion),n.archivo&&i.append("archivo",n.archivo),k.post(route("client.works.review",d.selectedWork.id),i,{preserveState:!0,forceFormData:!0}),v(),h("close")};return(i,t)=>(l(),r(b,null,[s.showReviewModal?(l(),r("div",q,[e("div",D,[t[5]||(t[5]=e("h2",{class:"text-2xl font-bold mb-3"},"Detalles del Trabajo",-1)),e("p",null,[t[3]||(t[3]=e("strong",null,"T√≠tulo:",-1)),p(" "+c(s.selectedWork.titulo),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Descripci√≥n:",-1)),p(" "+c(s.selectedWork.descripcion),1)]),t[6]||(t[6]=e("h3",{class:"mt-4 font-semibold"},"üìÇ Archivos Adjuntos:",-1)),s.selectedWork.archivos?(l(),r("div",M,[e("div",A,[(l(!0),r(b,null,m(s.selectedWork.archivos.filter(o=>o),o=>(l(),r("div",{key:o},[e("a",{href:`/storage/${o}`,target:"_blank",class:"text-blue-500 hover:underline"},[e("img",{src:`/storage/${o}`,class:"w-32 h-auto rounded shadow"},null,8,V)],8,F)]))),128))])])):a("",!0),t[7]||(t[7]=e("h3",{class:"mt-6 font-semibold"},"üîÑ Historial de Cambios",-1)),s.selectedWork.change_requests.length?(l(),r("ul",B,[(l(!0),r(b,null,m(s.selectedWork.change_requests,o=>(l(),r("li",{key:o.id},[e("p",null,[e("strong",null,"üìù "+c(o.descripcion),1)]),o.archivo?(l(),r("p",T,[e("a",{href:`/storage/${o.archivo}`,target:"_blank",class:"text-blue-500 hover:underline"}," üìÇ Ver Archivo ",8,$)])):a("",!0)]))),128))])):a("",!0),e("div",z,[s.selectedWork.change_requests.length>=3?(l(),r("button",E," Ponte en contacto para solicitar nuevos cambios. ")):a("",!0),s.selectedWork.change_requests.length<3?(l(),r("button",{key:1,onClick:x,class:"mr-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-700"}," ‚ùå Rechazar ("+c(s.selectedWork.change_requests?s.selectedWork.change_requests.length:0)+"/3) ",1)):a("",!0),e("button",{onClick:w,class:"mr-2 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-700"}," ‚úÖ Aceptar "),e("button",{onClick:t[0]||(t[0]=o=>h("close")),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-700"}," ‚ùå Cerrar ")])])])):a("",!0),u.value?(l(),r("div",N,[e("div",S,[t[8]||(t[8]=e("h2",{class:"text-2xl font-bold mb-3"},"Justificar Rechazo",-1)),t[9]||(t[9]=e("p",{class:"text-gray-600 mb-4"},"Por favor, proporciona detalles sobre los cambios que deseas.",-1)),t[10]||(t[10]=e("label",{class:"block font-semibold"},"‚úèÔ∏è Explica los cambios necesarios:",-1)),C(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>g(n).descripcion=o),class:"border p-2 rounded w-full h-24 mt-2"},null,512),[[R,g(n).descripcion]]),t[11]||(t[11]=e("label",{class:"block mt-4 font-semibold"},"üìÇ Adjuntar Archivo (Opcional):",-1)),e("input",{type:"file",onChange:t[2]||(t[2]=o=>g(n).archivo=o.target.files[0]),class:"border p-2 rounded w-full"},null,32),e("div",{class:"mt-6 flex justify-between"},[e("button",{onClick:y,class:"mr-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-700"}," ‚ùå Enviar Rechazo "),e("button",{onClick:v,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-700"}," ‚ùå Cancelar ")])])])):a("",!0)],64))}};export{P as default};
